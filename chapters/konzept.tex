
% ===========================
\chapter{Konzept}
\label{konzept}
% ===========================

Wie in Abschnitt \ref{grundlagen_fahren} beschrieben, stellt das Testen von hochautomatisierten \ac{FAS} die Automobilindustrie vor große Herausforderungen. Die Menge der bekannten Fahrszenarien ist nur eine Teilmenge aller Szenarien, die zukünftige \ac{FAS} abdecken müssen. Die Folge ist eine steigende Anzahl benötigter Testkilometer, die in Zukunft mit ökonomischem Aufwand nicht mehr umsetzbar sein wird. Es müssen neue Methoden gefunden werden, relevante Szenarien für die Generierung von Testfällen zu identifizieren, um die Sicherung von hochautomatisierten \ac{FAS} mit ökonomischen Aufwand garantieren zu können.

Genau hier soll diese Arbeit einen Beitrag leisten. Das Ziel, wie bereits in Abschnitt \ref{einleitung_zielsetzung} erklärt, ist die Klassifizierung von realen Fahrszenarien. Die Grundidee ist es, einen Klassifikator mit einem großen Anteil synthetischer Daten (circa 95\%) und einem kleinen Anteil realer Daten (circa 5\%) von bisher bekannten Szenarien zu trainieren. Es wird mit einem großen Teil synthetischer Daten gearbeitet, weil es in der Praxis um ein Vielfaches einfacher ist synthetische Daten zu generieren und automatisch zu Labeln als große Mengen realer Daten zu Labeln. Der trainierte Klassifikator kann dann bekannte Szenarien sehr gut klassifizieren. Die Idee ist, dass auf diese Weise auch unbekannte Szenarien herausgefiltert werden können, weil diese von dem trainierten Klassifikator nicht erkannt werden. Diese bisher unbekannten Szenarien können dann wiederum als Basis für neue Testfälle für die Sicherung hochautomatisierter Fahrfunktionen verwendet werden.

In dieser Arbeit soll ein Proof-of-Concept für diese Methodik entwickelt werden. Dafür wird im folgenden Abschnitt \ref{konzept_struktur} das Konzept im Detail und die Vorgehensweise vorgestellt. Anschließend wird in Abschnitt \ref{konzept_methodik} die Methodik erklärt mit welcher dieses Konzept umgesetzt werden soll.


% ===========================
\section{Struktur}
\label{konzept_struktur}
% ===========================

Die Umsetzung in dieser Arbeit lässt sich in drei Teile untergliedern. Im ersten Teil werden die zu klassifizierenden Szenarien als \textit{logische Szenarien} definiert. Auf der Basis werden im zweiten Teil synthetische und reale Trainingsdaten generiert. Im dritten Teil wird schließlich ein \ac{KNN} als Klassifikator trainiert und evaluiert. Diese Struktur ist schematisch in Abbildung \ref{fig_konzept_struktur} abgebildet und wird in den folgenden Absätzen weiter beschrieben.

\begin{figure}[h]
\centering
\includegraphics[scale=0.6]{konzept_struktur.pdf}
\caption{Konzept dieser Arbeit}
\label{fig_konzept_struktur}
\end{figure}

Im ersten Schritt der Umsetzung werden bestimmte Fahrszenarien ausgewählt und wie in Abschnitt \ref{grundlagen_fahren_szenarien} definiert. In dieser Arbeit werden Szenarien auf der Ebene der \textit{logischen Szenarien} definiert. Nachdem Szenarien ausgewählt und definiert sind, werden synthetische und reale Daten für das Training eines Klassifikators benötigt.

Für die Generierung von synthetischen Daten wird mit der Simulationssoftware CarMaker gearbeitet. Mit dieser Software können das Ego-Fahrzeug, Straßen, Verkehr und die Trajektorien aller Fahrzeuge generiert und beliebig verändert werden. Die Idee ist es, Fahrten des Ego-Fahrzeugs zu simulieren, entsprechende Bild- und Signaldaten aufzuzeichnen und die Bilddaten anhand der Signaldaten zu labeln. Auf diese Weise können ohne großen Aufwand beliebig viele synthetische Daten erzeugt und gelabelt werden. Mit CarMaker können sowohl Rohdaten, wie zum Beispiel Radarsignale des Ego-Fahrzeugs, als auch abstrakte Informationen, wie die Position und Geschwindigkeit von anderen Objekten, simuliert werden. Amersbach und Winner \cite{amersbach2017functional} stellen einen Ansatz für die funktionale Dekomposition von hochautomatisierten \ac{FAS} vor. In diesem Ansatz werden Informationen über sechs Schichten, von den Ground Truth Daten über die Szenenerkennung bis zur entsprechenden Aktion des Ego-Fahrzeugs, abgeleitet. Ein Schema dieses Ansatzes ist in Abbildung \ref{fig_functional_decomposition} dargestellt. In dieser Arbeit werden für das Labeln der Bilddaten Signaldaten generiert, die nach Schicht 1 (e.g. Geschwindigkeit des Ego-Fahrzeugs) und Schicht 2 (e.g Position des vorausfahrenden Fahrzeugs) eingeordnet werden können. Jeder generierte Zeitpunkt stellt eine Szene, wie in Abschnitt \ref{grundlagen_fahren_szenarien} beschrieben, dar. Jede Szene wird separat auf Basis der entsprechenden Signaldaten nach festgelegten Regeln klassifiziert. Die Aneinanderreihung von mehreren Szenen ergibt schließlich ein Szenario. Für die Generierung von realen Trainingsdaten werden Videosequenzen verwendet und manuell gelabelt.

\begin{figure}[h]
\centering
\includegraphics[scale=0.4]{funktionale_dekomposition.pdf}
\caption{Schema der funktionalen Dekomposition \cite{amersbach2017functional}}
\label{fig_functional_decomposition}
\end{figure}

Für das Training und die Evaluation eines Klassifikators werden \acp{KNN} verwendet. Wie Abschnitt \ref{grundlagen_nn_video} gibt es verschiedene Ansätze einen Klassifikator für Videos zu trainieren. In dieser Arbeit werden zwei verschiedene Ansätze angewendet und miteinander verglichen. Beim ersten Ansatz werden \acp{CNN} verwendet um einzelne Bilder zu klassifizieren. \acp{CNN} sind nach dem Stand der Technik die besten Architekturen um Merkmale aus Bildern zu extrahieren. Im Anschluss werden Videos mit dem Szenario klassifiziert, mit dem die meisten Bilder im Video klassifiziert wurden. Mit dem zweiten Ansatz wird ein Klassifikator aus einer Kombination von \acp{CNN} und \acp{LSTM} erstellt. Damit können räumlichen und zeitlichen Merkmalen aus ganzen Videos extrahiert und diese dann auf der Basis klassifiziert werden. Wie oben beschrieben wird für das Training nur ein kleiner Teil realer und ein großer Teil synthetischer Daten verwendet, um die Skalierbarkeit dieses Ansatzes in der Praxis zu gewährleisten.
 

% ===========================
\section{Ansätze, Methoden, Werkzeuge}
\label{konzept_methodik}
% ===========================

In diesem Abschnitt wird ein Überblick gegeben, welche Ansätze, Methoden und Werkzeuge in den jeweiligen Teilen der Umsetzung verwendet werden. Diese Zuordnung ist in der folgenden Tabelle \ref{tab_konzept_methods} dargestellt. Die detaillierte Beschreibung folgt in Kapitel \ref{umsetzung}.

\begin{longtable}[c]{p{5cm} p{6.5cm} p{1.5cm}}
\textbf{Teil der Umsetzung} & \textbf{Ansätze, Methoden, Werkzeuge} & \textbf{Quellen} \\
\hline
\endhead

Auswahl und Definition geeigneter Fahrszenarien & Konzept der \textit{logischen Szenarien} & \cite{ulbrich2015defining}, \cite{bagschik2017szenarien} \\
\hline
Simulation und Labeln synthetischer Trainingsdaten & Generierung von Bild- und Signaldaten mit CarMaker, regelbasierte Klassifizierung auf Basis von vorher festgelegten Signaldaten & \cite{ipg2018carmaker} \\
\hline
Generierung realer Trainingsdaten & Auswahl geeigneter Videosequenzen von YouTube, manuelles Labeln & \cite{youtube2018video}, \cite{google2018route1}, \cite{google2018route2} \\
\hline
Vorbereitung der Daten, Erstellung des Klassifikators und Evaluation der Experimente & Verschiedene Architekturen mit \acp{CNN} und \acp{LSTM}, implementiert mit Python und Keras & \cite{chollet2015keras}, \cite{lecun2010convolutional}, \cite{hochreiter1997long} \\

\hline
\caption{Ansätze, Methoden und Werkzeuge dieser Arbeit}
\label{tab_konzept_methods}
\end{longtable}




